document.addEventListener('DOMContentLoaded',function(){initThreeScene();setupQuoteForm();initSwiper()});function initThreeScene(){if (typeof THREE==='undefined'){console.error('Three.js não foi carregado.');return}const container=document.getElementById('canvas-container');if (!container){console.error('Container do canvas não encontrado.');return}const scene=new THREE.Scene();const camera=new THREE.PerspectiveCamera(75,container.clientWidth / container.clientHeight,.1,1000);const renderer=new THREE.WebGLRenderer({alpha:true});const clock=new THREE.Clock();renderer.setSize(container.clientWidth,container.clientHeight);renderer.setPixelRatio(window.devicePixelRatio);container.appendChild(renderer.domElement);const productGroup=new THREE.Group();scene.add(productGroup);const textureLoader=new THREE.TextureLoader();const products=[{url:"assets/images/relogioponto.webp",width:1200,height:1200},{url:"assets/images/relogiodeponto02.webp",width:1200,height:1200},{url:"assets/images/relogiodeponto03.webp",width:1200,height:1200}];let loadedProductTextures=[];let currentTextureIndex=0;let lastTextureChangeTime=0;const transitionInterval=5;let texturesLoadedCount=0;const totalTextures=products.length;const productGeometry=new THREE.PlaneGeometry(7,7);const productMaterial=new THREE.MeshStandardMaterial({metalness:.2,roughness:.6,transparent:true,opacity:1});const productPlane=new THREE.Mesh(productGeometry,productMaterial);productPlane.position.z=0.1;productGroup.add(productPlane);const initialAspectRatio=products[0].width / products[0].height;productPlane.scale.set(initialAspectRatio * .8,.8,1);products.forEach((product,index)=>{textureLoader.load(product.url,(texture)=>{loadedProductTextures[index]=texture;texturesLoadedCount++;if (texturesLoadedCount===totalTextures){productPlane.material.map=loadedProductTextures[currentTextureIndex];productPlane.material.needsUpdate=true;lastTextureChangeTime=clock.getElapsedTime()}},undefined,(err)=>{console.error(`Erro ao carregar a textura ${product.url}:`,err);texturesLoadedCount++;if (texturesLoadedCount===totalTextures && !productPlane.material.map){productPlane.material.color.set(0x666666)}})});const ambientLight=new THREE.AmbientLight(0xffffff,.8);scene.add(ambientLight);const directionalLight=new THREE.DirectionalLight(0xffffff,1);directionalLight.position.set(5,5,5);scene.add(directionalLight);camera.position.z=5;let mouseX=0;let mouseY=0;function onMouseMove(event){mouseX=(event.clientX / window.innerWidth) * 2 - 1;mouseY=-(event.clientY / window.innerHeight) * 2+1}window.addEventListener('mousemove',onMouseMove);function animate(){requestAnimationFrame(animate);const elapsedTime=clock.getElapsedTime();if (texturesLoadedCount===totalTextures && elapsedTime - lastTextureChangeTime>=transitionInterval){currentTextureIndex=(currentTextureIndex+1) % totalTextures;productPlane.material.map=loadedProductTextures[currentTextureIndex];productPlane.material.needsUpdate=true;const aspectRatio=products[currentTextureIndex].width / products[currentTextureIndex].height;productPlane.scale.set(aspectRatio * .8,.8,1);lastTextureChangeTime=elapsedTime}productGroup.rotation.y+=(mouseX * .4 - productGroup.rotation.y) * .04;productGroup.rotation.x+=(-mouseY * .4 - productGroup.rotation.x) * .04;renderer.render(scene,camera)}window.addEventListener('resize',()=>{if (container.clientWidth>0 && container.clientHeight>0){camera.aspect=container.clientWidth / container.clientHeight;camera.updateProjectionMatrix();renderer.setSize(container.clientWidth,container.clientHeight)}});animate()}function setupQuoteForm(){const quoteForm=document.getElementById('quoteForm');if (!quoteForm) return;quoteForm.addEventListener('submit',function(event){event.preventDefault();const companyNameInput=document.getElementById('companyName');const companyName=companyNameInput.value;const numEmployeesRadio=document.querySelector('input[name="numEmployees"]:checked');if (!companyName.trim()){alert('Por favor, preencha o nome da empresa.');companyNameInput.focus();return}const numEmployees=numEmployeesRadio ? numEmployeesRadio.value :'Não informado';const whatsappNumber='+5522999342494';const message=`Olá,Líder Brasil Informática! Gostaria de uma cotação para o relógio de ponto Control ID.\n\n`+`Nome da Empresa (Razão Social):${companyName}\n`+`Quantidade de Funcionários:${numEmployees}\n\n`+`Aguardamos seu contato!`;const encodedMessage=encodeURIComponent(message);const whatsappLink=`https://wa.me/${whatsappNumber}?text=${encodedMessage}`;window.open(whatsappLink,'_blank')})}function initSwiper(){if (typeof Swiper==='undefined'){console.error('Swiper.js não foi carregado.');return}const swiper=new Swiper('.swiper-container',{slidesPerView:1,spaceBetween:30,loop:true,grabCursor:true,pagination:{el:'.swiper-pagination',clickable:true,},navigation:{nextEl:'.swiper-button-next',prevEl:'.swiper-button-prev',},breakpoints:{768:{slidesPerView:2,spaceBetween:30},1024:{slidesPerView:3,spaceBetween:40}}})}